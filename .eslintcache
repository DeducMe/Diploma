[{"D:\\react тесты\\diploma\\dev\\src\\reducers\\reducer.js":"1","D:\\react тесты\\diploma\\dev\\src\\reducers\\companyProfile.js":"2","D:\\react тесты\\diploma\\dev\\src\\components\\Responses\\ResponsePopup.js":"3","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\Vacancies\\VacancyRedactPopup\\VacancyRedactPopup.js":"4","D:\\react тесты\\diploma\\dev\\src\\components\\Search\\SearchMain\\SearchMain.js":"5","D:\\react тесты\\diploma\\dev\\src\\components\\Responses\\Responses.js":"6","D:\\react тесты\\diploma\\dev\\src\\components\\ResponsePopup\\ResponsePopup.js":"7","D:\\react тесты\\diploma\\dev\\src\\actions\\serverConnections.js":"8","D:\\react тесты\\diploma\\dev\\src\\reducers\\response.js":"9","D:\\react тесты\\diploma\\dev\\src\\components\\Nav\\Nav.js":"10","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionBaseInfo.js":"11","D:\\react тесты\\diploma\\dev\\src\\App.js":"12","D:\\react тесты\\diploma\\dev\\src\\reducers\\userData.js":"13","D:\\react тесты\\diploma\\dev\\src\\reducers\\search.js":"14","D:\\react тесты\\diploma\\dev\\src\\components\\Loader\\Loader.js":"15","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\Resumes\\Resumes.js":"16","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\Resumes\\ResumeRedactPopup\\ResumeRedactPopup.js":"17","D:\\react тесты\\diploma\\dev\\src\\components\\Nav\\Popup\\Popup.js":"18","D:\\react тесты\\diploma\\dev\\src\\components\\Nav\\OptionsPopup\\OptionsPopup.js":"19","D:\\react тесты\\diploma\\dev\\src\\scripts\\commonScripts.js":"20","D:\\react тесты\\diploma\\dev\\src\\components\\VacancyPopup\\VacancyPopup.js":"21","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\CompanyProfile.js":"22","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\ProfileRedactPopup.js":"23","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\ImageCropper.js":"24","D:\\react тесты\\diploma\\dev\\src\\components\\leafletMap\\LeafletMap.js":"25","D:\\react тесты\\diploma\\dev\\src\\components\\Landing\\Landing.js":"26","D:\\react тесты\\diploma\\dev\\src\\components\\leafletMap\\testCities.js":"27","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionBaseInfo.js":"28","D:\\react тесты\\diploma\\dev\\src\\reducers\\user.js":"29","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\Side\\Side.js":"30","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\MainPlaceholder.js":"31","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\ImageCropper.js":"32","D:\\react тесты\\diploma\\dev\\src\\actions\\fileUploader.js":"33","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionImages.js":"34","D:\\react тесты\\diploma\\dev\\src\\reducers\\profile.js":"35","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\ProfileRedactPopup.js":"36","D:\\react тесты\\diploma\\dev\\src\\reducers\\vacancy.js":"37","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\Main\\Main.js":"38","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\Side\\Side.js":"39","D:\\react тесты\\diploma\\dev\\src\\actions\\asyncDispatch.js":"40","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionImages.js":"41","D:\\react тесты\\diploma\\dev\\src\\reducers\\nav.js":"42","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionExperience.js":"43","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\MainPlaceholder.js":"44"},{"size":619,"mtime":1617957894927,"results":"45","hashOfConfig":"46"},{"size":3664,"mtime":1616094655715,"results":"47","hashOfConfig":"46"},{"size":6770,"mtime":1618131415081,"results":"48","hashOfConfig":"46"},{"size":26917,"mtime":1618224119217,"results":"49","hashOfConfig":"46"},{"size":12222,"mtime":1617963414526,"results":"50","hashOfConfig":"46"},{"size":15570,"mtime":1618133127723,"results":"51","hashOfConfig":"46"},{"size":3417,"mtime":1617959843998,"results":"52","hashOfConfig":"46"},{"size":17519,"mtime":1618228778569,"results":"53","hashOfConfig":"46"},{"size":3697,"mtime":1618132668874,"results":"54","hashOfConfig":"46"},{"size":8433,"mtime":1618228800243,"results":"55","hashOfConfig":"46"},{"size":10185,"mtime":1617961367662,"results":"56","hashOfConfig":"46"},{"size":1913,"mtime":1617957893388,"results":"57","hashOfConfig":"46"},{"size":418,"mtime":1614354532972,"results":"58","hashOfConfig":"46"},{"size":5722,"mtime":1617957894985,"results":"59","hashOfConfig":"46"},{"size":872,"mtime":1617957893774,"results":"60","hashOfConfig":"46"},{"size":6556,"mtime":1617957894430,"results":"61","hashOfConfig":"46"},{"size":17267,"mtime":1618223795903,"results":"62","hashOfConfig":"46"},{"size":12851,"mtime":1618224973708,"results":"63","hashOfConfig":"46"},{"size":2442,"mtime":1618129616632,"results":"64","hashOfConfig":"46"},{"size":6129,"mtime":1618129988576,"results":"65","hashOfConfig":"46"},{"size":4254,"mtime":1618132169217,"results":"66","hashOfConfig":"46"},{"size":4526,"mtime":1616093115928,"results":"67","hashOfConfig":"46"},{"size":7013,"mtime":1616177915164,"results":"68","hashOfConfig":"46"},{"size":5982,"mtime":1616516540996,"results":"69","hashOfConfig":"46"},{"size":4109,"mtime":1618221399060,"results":"70","hashOfConfig":"46"},{"size":7117,"mtime":1617957893704,"results":"71","hashOfConfig":"46"},{"size":69503,"mtime":1618218954892,"results":"72","hashOfConfig":"46"},{"size":4903,"mtime":1618223163656,"results":"73","hashOfConfig":"46"},{"size":2050,"mtime":1614354533092,"results":"74","hashOfConfig":"46"},{"size":249,"mtime":1614354532959,"results":"75","hashOfConfig":"46"},{"size":3091,"mtime":1616668818571,"results":"76","hashOfConfig":"46"},{"size":5843,"mtime":1616518399271,"results":"77","hashOfConfig":"46"},{"size":462,"mtime":1612661823022,"results":"78","hashOfConfig":"46"},{"size":5161,"mtime":1616152410544,"results":"79","hashOfConfig":"46"},{"size":6453,"mtime":1617957894926,"results":"80","hashOfConfig":"46"},{"size":5662,"mtime":1616668786388,"results":"81","hashOfConfig":"46"},{"size":11142,"mtime":1616093116727,"results":"82","hashOfConfig":"46"},{"size":10466,"mtime":1617957894243,"results":"83","hashOfConfig":"46"},{"size":249,"mtime":1616174226855,"results":"84","hashOfConfig":"46"},{"size":1216,"mtime":1617957893409,"results":"85","hashOfConfig":"46"},{"size":5022,"mtime":1616093116028,"results":"86","hashOfConfig":"46"},{"size":4300,"mtime":1617957894851,"results":"87","hashOfConfig":"46"},{"size":8610,"mtime":1616093116195,"results":"88","hashOfConfig":"46"},{"size":6803,"mtime":1617957894278,"results":"89","hashOfConfig":"46"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"rkbsr4",{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"95","messages":"96","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"98"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"103","messages":"104","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"106"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"109","messages":"110","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"113"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"116","usedDeprecatedRules":"117"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"120"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"117"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"129","messages":"130","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"131","usedDeprecatedRules":"94"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"134"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"137","usedDeprecatedRules":"113"},{"filePath":"138","messages":"139","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"140","messages":"141","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"142"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"145","usedDeprecatedRules":"113"},{"filePath":"146","messages":"147","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"148","messages":"149","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"150","usedDeprecatedRules":"94"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"153"},{"filePath":"154","messages":"155","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"156","usedDeprecatedRules":"94"},{"filePath":"157","messages":"158","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"159","usedDeprecatedRules":"113"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"162","messages":"163","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"164","messages":"165","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"166","messages":"167","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"168","messages":"169","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"170","messages":"171","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"172"},{"filePath":"173","messages":"174","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"142"},{"filePath":"175","messages":"176","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"177","messages":"178","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"179","messages":"180","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"181","messages":"182","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"94"},{"filePath":"183","messages":"184","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"185","messages":"186","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"117"},{"filePath":"187","messages":"188","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"189","messages":"190","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"191","messages":"192","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"193","messages":"194","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"117"},{"filePath":"195","messages":"196","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\react тесты\\diploma\\dev\\src\\reducers\\reducer.js",[],"D:\\react тесты\\diploma\\dev\\src\\reducers\\companyProfile.js",[],["197","198"],"D:\\react тесты\\diploma\\dev\\src\\components\\Responses\\ResponsePopup.js",["199","200"],"import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport {createResponse} from '../../actions/serverConnections'\r\nimport {getUserResponses, getUserAnswers, changeAnswer} from '../../actions/serverConnections'\r\nimport {responseLoaderActivate, responseLoaderDeactivate, answersLoaderActivate, answersLoaderDeactivate} from '../../actions/asyncDispatch'\r\nimport {userTypeToSearchType , getNormalUserType, invertUserType} from '../../scripts/commonScripts'\r\nimport fileUploader from '../../actions/fileUploader';\r\n\r\n\r\n// компонент костыль, когда-нибудь пофикшу\r\nclass ResponsePopup extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            chosenWorkValue:-1\r\n        };\r\n    }\r\n\r\n    getResponseData = (msg) => {\r\n        let data = {}\r\n        if (this.props.userState.user_type === 'employer'){\r\n            data.employer = this.props.userState.id\r\n            data.vacancy = this.props.item.answer\r\n            data.cv = this.props.item.pk\r\n            data.worker = this.props.item.owner_id\r\n        }\r\n        else{\r\n            data.employer = this.props.item.owner_id\r\n            data.vacancy = this.props.item.pk\r\n            data.cv = this.props.item.answer\r\n            data.worker = this.props.userState.id\r\n        }\r\n        data.message = msg\r\n        data.state = this.props.item.state || 'sent'\r\n\r\n        return data\r\n    }\r\n\r\n    changeWorkValue = (e) =>{\r\n        this.setState({\r\n            chosenWorkValue: e.target.value\r\n        })\r\n    }\r\n\r\n    popupClose = () =>{\r\n        this.props.onCloseResponsePopup()\r\n    }\r\n\r\n    getAvatarFromFirebase = (id, pk, userType) =>{   //пришлось делать кучу изменений состояний, потому что один flutter разработчик решил, что он не будет сохранять url фотографии. \r\n        const storageRef = fileUploader.storage().ref()\r\n        const fileRef = storageRef.child('user-avatar' + id)\r\n        fileRef.getDownloadURL()\r\n        .then((response) => this.props.onSetValuePhoto(response, pk, userType))\r\n        .catch(err => this.props.onSetValuePhoto('https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-avatar.jpg?alt=media&token=5058f243-49e5-4df4-8686-899c6ce12c54', pk, userType))\r\n    }\r\n\r\n    makeResponse = (e) => {\r\n        e.preventDefault()\r\n\r\n        const data = this.getResponseData(e.target.responseMessageInput.value)\r\n\r\n        this.props.onMakeResponse(userTypeToSearchType(invertUserType(this.props.userState.user_type)), data)\r\n        this.props.onChangeAnswer(this.props.answerId, userTypeToSearchType(this.props.userState.user_type), 'viewed')\r\n        this.props.onCloseResponsePopup()\r\n        this.props.onNullifyValues()\r\n        this.props.onNullifyAnswers()\r\n\r\n        const userType = getNormalUserType(this.props.userState.user_type) // а это прекрасный костыль, чтобы обойти говнорукость бэкендера. В userState у нас тип юзера employee, а во всех юрлах нам нужен worker\r\n        this.props.onGetUserResponses(userType, this.props.responseState.nextValues, this.props.userState.id, this.getAvatarFromFirebase)\r\n        this.props.onGetUserAnswers(userType, this.props.responseState.nextAnswers, this.props.userState.id, this.getAvatarFromFirebase)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"response-form-popup rounded\" onSubmit={this.makeResponse.bind(this)}>\r\n                <button className=\"close-popup-btn\" onClick={this.popupClose} tabIndex=\"-1\">x</button>\r\n\r\n                <textarea className=\"response-form-popup__textarea rounded\" type=\"text\" name=\"responseMessageInput\" placeholder=\"Сопроводительное письмо\"></textarea>\r\n               \r\n                <input className=\"sup-btn\" type=\"submit\" />\r\n            </form>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) =>{\r\n    return {\r\n        userState:state.user.user,\r\n        item:ownProps.item,\r\n        answerId:ownProps.answerId,\r\n        responseState:state.response,\r\n    }\r\n  }\r\n  \r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        onMakeResponse:(type, data)=>{\r\n            dispatch(createResponse(type, data))\r\n        },\r\n        onChangeAnswer:(id, responseType, type) => {\r\n            dispatch(changeAnswer(id,responseType, type))\r\n\r\n        },\r\n        onCloseResponsePopup: () => {\r\n            dispatch({type : 'CLOSE_RESPONSE_POPUP', payload:null})\r\n        },\r\n        onGetUserResponses: (userType, next, userId, getAvatarFromFirebase) => {\r\n            dispatch(responseLoaderActivate())\r\n\r\n            dispatch(getUserResponses(userType, next, userId))\r\n            .then((data)=>{\r\n                if (data.data !== null && data.data !== 404){\r\n                    dispatch({type : 'RESPONSE_UPDATE_RESULTS_COUNT', payload:data.data.count})\r\n                    dispatch({type : 'RESPONSE_UPDATE_VALUES', payload:data.data.results}) \r\n                    data.data.results.map((item) => {\r\n                        getAvatarFromFirebase(userId, item.id, userType)\r\n                    })\r\n                }\r\n            })\r\n            .then(response => dispatch(responseLoaderDeactivate()))\r\n        },\r\n        onGetUserAnswers: (userType, next, userId, getAvatarFromFirebase) => {\r\n            dispatch(answersLoaderActivate())\r\n\r\n            dispatch(getUserAnswers(userType, next, userId))\r\n            .then((data)=>{\r\n                if (data.data !== null && data.data !== 404){\r\n                    dispatch({type : 'ANSWERS_UPDATE_RESULTS_COUNT', payload:data.data.count})\r\n                    dispatch({type : 'RESPONSE_UPDATE_ANSWERS', payload:data.data.results}) \r\n                    data.data.results.map((item) => {\r\n                        getAvatarFromFirebase(userId, item.id, userType)\r\n                    })\r\n                }\r\n            })\r\n            .then(response => dispatch(answersLoaderDeactivate()))\r\n        },\r\n        onNullifyValues: () => {\r\n            dispatch({type : 'RESPONSE_NULLIFY_VALUES', payload:null})\r\n        },\r\n        onNullifyAnswers: () => {\r\n            dispatch({type : 'RESPONSE_NULLIFY_ANSWERS', payload:null})\r\n        },\r\n        onSetValuePhoto: (photo, id, userType) => {\r\n            if (userType === 'worker')\r\n            dispatch({type : 'SEARCH_UPDATE_VALUES_PHOTO', payload:{photo:photo, id:id}})\r\n            else \r\n            dispatch({type : 'SEARCH_UPDATE_ANSWERS_PHOTO', payload:{photo:photo, id:id}})\r\n\r\n        },\r\n    }\r\n}\r\n  \r\nexport default connect(mapStateToProps, mapDispatchToProps)(ResponsePopup);",["201","202"],"D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\Vacancies\\VacancyRedactPopup\\VacancyRedactPopup.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\Search\\SearchMain\\SearchMain.js",["203","204","205","206"],"D:\\react тесты\\diploma\\dev\\src\\components\\Responses\\Responses.js",["207","208","209"],"import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Loader from '../Loader/Loader'\r\nimport {getUserResponses, getUserAnswers} from '../../actions/serverConnections'\r\nimport {responseLoaderActivate, responseLoaderDeactivate, answersLoaderActivate, answersLoaderDeactivate} from '../../actions/asyncDispatch'\r\nimport {userTypeToUrlUserType, getNormalUserType, userTypeToSearchType, simplifyDate} from '../../scripts/commonScripts'\r\nimport fileUploader from '../../actions/fileUploader';\r\nimport { Link } from 'react-router-dom'\r\nimport './responses.css'\r\nimport dropdownArrow from '../../img/right-arrow.svg'\r\nimport ResponsePopup from './ResponsePopup'\r\nimport { InView } from \"react-intersection-observer\";\r\n\r\nimport VacancyPopup from '../VacancyPopup/VacancyPopup'\r\n\r\n// здесь пришлось делать два запроса на одной странице, потому что бекендер ленивое чмо (ОБА ЕЩЕ И ЧЕРЕЗ ПАГИНАЦИЮ)\r\n// с пагинацией пока не очень понятно что делать. \r\n// прокачана стрессоустойчивость и решение нестандартаных задач\r\n\r\nclass Responses extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            openedId:-1\r\n        };\r\n    }\r\n\r\n    getAvatarFromFirebase = (id, pk) =>{   //пришлось делать кучу изменений состояний, потому что один flutter разработчик решил, что он не будет сохранять url фотографии. \r\n        const storageRef = fileUploader.storage().ref()\r\n        const fileRef = storageRef.child('user-avatar' + id)\r\n        fileRef.getDownloadURL()\r\n        .then((response) => this.props.onSetValuePhoto(response, pk))\r\n        .catch(err => this.props.onSetValuePhoto('https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-avatar.jpg?alt=media&token=5058f243-49e5-4df4-8686-899c6ce12c54', pk))\r\n    }\r\n\r\n    invertUserType(type){\r\n        return type === 'employer' ? 'worker' : 'employer'\r\n    }\r\n\r\n    openVacancyInfo = (id) =>{\r\n        this.props.onOpenVacancyInfo(id)\r\n    }\r\n    \r\n    openResponsePopup = (index, state) => {\r\n        this.props.onOpenResponsePopup(index, state)\r\n    }\r\n\r\n    getInvites = () =>{\r\n        return this.props.responseState.responseAnswers.filter((item) => {\r\n            return this.props.responseState.responseValues.find(value => value.vacancy === item.vacancy && value.cv === item.cv) === undefined\r\n        })\r\n    }\r\n\r\n    getResults = () =>{\r\n        if (this.props.responseState.nextValues !== null || this.props.responseState.nextAnswers !== null){\r\n            const userType = getNormalUserType(this.props.userState.user_type) // а это прекрасный костыль, чтобы обойти говнорукость бэкендера. В userState у нас тип юзера employee, а во всех юрлах нам нужен worker\r\n            this.props.onGetUserResponses(userType, this.props.responseState.nextValues, this.props.userState.id, this.getAvatarFromFirebase)\r\n            console.log(this.props.responseState.nextValues, this.props.responseState.nextAnswers)\r\n            this.props.onGetUserAnswers(userType, this.props.responseState.nextAnswers, this.props.userState.id, this.getAvatarFromFirebase)\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.onNullifyValues()\r\n        this.props.onNullifyAnswers()\r\n        console.log(this.props.userState.id)\r\n        this.getResults()\r\n    }\r\n\r\n    getAnswer(item){\r\n        return this.props.responseState.responseAnswers.find(answer => answer.vacancy === item.vacancy && answer.cv === item.cv)\r\n    }\r\n\r\n    render() {\r\n        if (this.props.responseState.responseLoading || this.props.responseState.answersLoading) \r\n            return <Loader active='active'></Loader>\r\n\r\n        else\r\n            return (\r\n                <section className=\"responses\">\r\n                    <div className=\"responses__header\">\r\n                        <h2 className=\"f-extra-large bold\">Ваши отклики и приглашения:</h2>\r\n                    </div>\r\n                    {this.props.responseState.responseValues.length !== 0 || this.props.responseState.responseAnswers.length !== 0 ? \r\n                        <ul className=\"responses__list rounded\">\r\n                            {console.log(this.getInvites())}\r\n                        {this.getInvites().map((item, index)=> \r\n                            <li key={index} className=\"responses__list-el rounded\">\r\n                            <div className=\"responses__list-el__header\">\r\n                                <button className=\"responses__list-el__header__link\" onClick={this.openVacancyInfo.bind(this, item.vacancy)}>\r\n                                    <h3 className=\"underline-link f-medium semi\">{item.vacancy_name}</h3>\r\n                                </button>\r\n                                <button className=\"responses__list-el__header__btn\"></button>\r\n\r\n                                <p className=\"responses__list-el__header__response-date semi\">{simplifyDate(item.date_response)}</p>\r\n                                \r\n                                <p className=\"green\">Приглашение</p>\r\n                            </div>\r\n\r\n                            <div className=\"responses__list-el__body opened\">\r\n                                <div className=\"responses__reciever responded\">\r\n                                    <Link to={\"/\"+userTypeToUrlUserType(this.invertUserType(this.props.userState.user_type))+\"/\" + item[this.invertUserType(this.props.userState.user_type)]}>\r\n                                        <img className=\"responses__avatar\" src={item[this.invertUserType(this.props.userState.user_type)+ '_avatar'] === '' ? 'https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-avatar.jpg?alt=media&token=5058f243-49e5-4df4-8686-899c6ce12c54' : item[this.invertUserType(this.props.userState.user_type)+'_avatar']} alt=\"\" />\r\n                                    </Link>\r\n                                        <p className=\"responses__message rounded\">{item.message}</p>\r\n                                    \r\n                                    <span className=\"responses__decoration\"></span>\r\n                                </div>\r\n\r\n                                <div className=\"responses__sender controls\">\r\n                                    <button className=\"sup-btn\" onClick={this.openResponsePopup.bind(this, index, 'accepted')}>принять</button>\r\n                                    <button className=\"sup-btn\" onClick={this.openResponsePopup.bind(this, index, 'declined')}>отказать</button>\r\n                                    {this.props.responseState.openedResponseId === index ? \r\n                                    <ResponsePopup\r\n                                    answerId = {item.id}\r\n                                    item ={{\r\n                                        'owner_id':item[this.invertUserType(this.props.userState.user_type)],\r\n                                        'pk':item[userTypeToSearchType(this.invertUserType(this.props.userState.user_type))],\r\n                                        'answer':item[userTypeToSearchType(this.props.userState.user_type)],\r\n                                        'state': this.props.responseState.responseSendState\r\n                                    }}></ResponsePopup> : ''}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"responses__list-el__footer\"></div>\r\n\r\n                        </li>\r\n                        )}\r\n                        {this.props.responseState.responseValues.map((item, index)=>{\r\n                        return (\r\n                        <li key={index} className=\"responses__list-el rounded\">\r\n                            <div className=\"responses__list-el__header\">\r\n                                <button className=\"responses__list-el__header__link\" onClick={this.openVacancyInfo.bind(this, item.vacancy)}>\r\n                                    <h3 className=\"underline-link f-medium semi\">{item.vacancy_name}</h3>\r\n                                </button>\r\n                                <button className=\"responses__list-el__header__btn\"></button>\r\n\r\n                                <p className=\"responses__list-el__header__response-date semi\">{simplifyDate(item.date_response)}</p>\r\n                                {\r\n                                this.getAnswer(item) !== undefined ?\r\n                                    this.getAnswer(item).state === 'viewed' ?\r\n                                        item.state === 'accepted' ? \r\n                                            <p className=\"green\">Приглашение</p> :\r\n                                            <p className=\"red\">Отказ</p> :\r\n                                        this.getAnswer(item).state === 'declined' ? \r\n                                            <p className=\"red\">Отказ</p>\r\n                                        : this.props.responseState.responseAnswers.find(answer => answer.vacancy === item.vacancy && answer.cv === item.cv).state === 'accepted' ? \r\n                                            <p className=\"green\">Приглашение</p>\r\n                                    : ''\r\n                                : ''\r\n                                }\r\n                            </div>\r\n\r\n                            <div className=\"responses__list-el__body opened\">\r\n                                <div className={\"responses__reciever \" + (item.state === 'declined' || item.state === 'accepted' || item.state === 'viewed' ? 'responded' : '')}>\r\n                                    <Link to={\"/\"+userTypeToUrlUserType(this.invertUserType(this.props.userState.user_type))+\"/\" + item[this.invertUserType(this.props.userState.user_type)]}>\r\n                                        <img className=\"responses__avatar\" src={item[this.invertUserType(this.props.userState.user_type)+ '_avatar'] === '' ? 'https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-avatar.jpg?alt=media&token=5058f243-49e5-4df4-8686-899c6ce12c54' : item[this.invertUserType(this.props.userState.user_type)+'_avatar']} alt=\"\" />\r\n                                    </Link>\r\n                                    {item.state === 'sent' ? \r\n                                        <p className=\"responses__message rounded\">Ответа пока нет :( </p>\r\n\r\n                                    : item.state === 'accepted' || item.state === 'declined' || item.state === 'viewed' ?\r\n                                        <p className=\"responses__message rounded responded\">{this.getAnswer(item) !== undefined ? this.getAnswer(item).message : ''}</p>\r\n                                    :''}\r\n                                    \r\n                                    <span className=\"responses__decoration\"></span>\r\n                                </div>\r\n                                \r\n                                {/* <div className=\"responses-control-block\">\r\n                                    <img className=\"responses-control-block__arrow\" src={dropdownArrow} alt=\"dropdown-arrow\" />\r\n                                    <button onClick={this.openResponseInfo.bind(this, item.id)}>Развернуть</button>\r\n                                </div> */}   \r\n                                {/* тут я мучаюсь с индексом */}\r\n\r\n                                <div className=\"responses__sender responded\">\r\n                                    <p className=\"responses__message rounded responded\">\r\n                                        {item.message}\r\n                                    </p>\r\n                                    <span className=\"responses__decoration \"></span>\r\n\r\n                                    <Link to={\"/\" + userTypeToUrlUserType(this.props.userState.user_type) + \"/\" + this.props.userState.id}>\r\n                                        <img className=\"responses__avatar\" src={this.props.userAvatar} alt=\"\" />\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"responses__list-el__footer\"></div>\r\n                        </li>)\r\n                        })}\r\n\r\n                    </ul>\r\n                    : <p>Откликов нет :(</p>}\r\n                    {this.props.responseState.openedVacancyId !== -1 ? <VacancyPopup id={this.props.responseState.openedVacancyId}></VacancyPopup> : ''}\r\n                    <InView as=\"div\" onChange={(inView, entry) => {\r\n                        if (inView) this.getResults()}}>\r\n                    </InView>\r\n                </section>\r\n            )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) =>{\r\n    return {\r\n        userState:state.user.user,\r\n        responseState:state.response,\r\n        userAvatar:state.nav.avatar\r\n    }\r\n}\r\n  \r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        onGetUserResponses: (userType, next, userId, getAvatarFromFirebase) => {\r\n            dispatch(responseLoaderActivate())\r\n\r\n            dispatch(getUserResponses(userType, next, userId))\r\n            .then((data)=>{\r\n                if (data.data !== null && data.data !== 404){\r\n                    dispatch({type : 'RESPONSE_UPDATE_RESULTS_COUNT', payload:data.data.count})\r\n                    dispatch({type : 'RESPONSE_UPDATE_VALUES', payload:data.data.results}) \r\n                    data.data.results.map((item) => {\r\n                        getAvatarFromFirebase(userId, item.id)\r\n                    })\r\n                }\r\n            })\r\n            .then(response => dispatch(responseLoaderDeactivate()))\r\n        },\r\n        onGetUserAnswers: (userType, next, userId, getAvatarFromFirebase) => {\r\n            dispatch(answersLoaderActivate())\r\n\r\n            dispatch(getUserAnswers(userType, next, userId))\r\n            .then((data)=>{\r\n                if (data.data !== null && data.data !== 404){\r\n                    dispatch({type : 'ANSWERS_UPDATE_RESULTS_COUNT', payload:data.data.count})\r\n                    dispatch({type : 'RESPONSE_UPDATE_ANSWERS', payload:data.data.results}) \r\n                    data.data.results.map((item) => {\r\n                        getAvatarFromFirebase(userId, item.id)\r\n                    })\r\n                }\r\n            })\r\n            .then(response => dispatch(answersLoaderDeactivate()))\r\n        },\r\n        onSetValuePhoto: (photo, id) => {\r\n            dispatch({type : 'RESPONSE_UPDATE_ANSWERS_PHOTO', payload:{photo:photo, id:id}})\r\n        },\r\n        onNullifyValues: () => {\r\n            dispatch({type : 'RESPONSE_NULLIFY_VALUES', payload:null})\r\n        },\r\n        onNullifyAnswers: () => {\r\n            dispatch({type : 'RESPONSE_NULLIFY_ANSWERS', payload:null})\r\n        },\r\n        onOpenResponsePopup: (index, state) => {\r\n            console.log(index)\r\n            dispatch({type : 'RESPONSE_OPEN_RESPONSE_POPUP', payload:{index:index, state:state}})\r\n        },\r\n        onOpenVacancyInfo: (id) =>{\r\n            dispatch({type : 'OPEN_VACANCY_POPUP', payload:id})\r\n        }\r\n\r\n    }\r\n}\r\n  \r\nexport default connect(mapStateToProps, mapDispatchToProps)(Responses);",["210","211"],"D:\\react тесты\\diploma\\dev\\src\\components\\ResponsePopup\\ResponsePopup.js",[],"D:\\react тесты\\diploma\\dev\\src\\actions\\serverConnections.js",["212"],"D:\\react тесты\\diploma\\dev\\src\\reducers\\response.js",[],["213","214"],"D:\\react тесты\\diploma\\dev\\src\\components\\Nav\\Nav.js",["215","216","217"],"import React, { Component, useEffect } from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport Popup from './Popup/Popup'\r\nimport OptionsPopup from './OptionsPopup/OptionsPopup'\r\n\r\nimport logo from '../../img/logo.svg'\r\nimport arrow from '../../img/arrow.svg'\r\nimport star from '../../img/star.svg'\r\nimport bell from '../../img/bell.svg'\r\nimport SearchPanel from './SearchPanel/SearchPanel'\r\nimport './nav.css'\r\nimport {Link} from 'react-router-dom'\r\nimport {logout, verify} from '../../actions/serverConnections'\r\nimport placeholderAvatar from '../../img/placeholder-avatar.jpg'\r\n\r\nclass Nav extends Component {\r\n  searchToggle = () => {\r\n    if (this.props.navState.searchActive){\r\n      this.props.onSearchDeactivate();\r\n    }\r\n    else{\r\n      this.props.onSearchActivate();\r\n    }\r\n  }\r\n\r\n  registartionPopupOpen = () => {\r\n    this.props.onRegistrationPopupActivate(this.props.history);\r\n  }\r\n\r\n  loginPopupOpen = () => {\r\n    this.props.onLoginPopupActivate(this.props.history);\r\n  }\r\n\r\n  logoutHandleFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.props.onLogout()\r\n    this.dropdownToggle()\r\n  }\r\n\r\n  dropdownToggle = () => {\r\n    if (this.props.navState.dropDownState === ''){\r\n      this.props.onDropDownActivate();\r\n    }\r\n    else{\r\n      this.props.onDropDownDeactivate();\r\n    }\r\n  }\r\n\r\n  optionsPopupToggle = () => {\r\n    this.dropdownToggle()\r\n\r\n    if (this.props.navState.optionsPopup.optionsPopupState === ''){\r\n      this.props.onOptionsPopupActivate();\r\n    }\r\n    else{\r\n      this.props.onOptionsPopupDeactivate();\r\n    }\r\n  }\r\n\r\n  checkOnEmpty(el, returnValue){\r\n    if (el !== \"\"){\r\n        return el\r\n    }\r\n\r\n    return returnValue\r\n  }\r\n\r\n  getUserProfileLink = () =>  {\r\n    return \"/\"+(this.props.userState.user.user_type === 'employee' ? 'profile' : 'company')+\"/\"+this.props.userState.user.id\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.props.onVerifyToken()\r\n    \r\n  }\r\n  \r\n  render(){\r\n\r\n    if (this.props.logged){\r\n\r\n        return (\r\n    <div className={\"nav-block \" + this.props.navState.position + \" \" + this.props.navState.transparency}>\r\n      <div className=\"nav-bar\">\r\n        <div className=\"container\">\r\n          <nav className=\"nav\">\r\n            <div className=\"nav__left-side\">\r\n              <Link to=\"/landing\" className=\"nav-el\" >\r\n                <img src={logo} alt=\"logo\"/>\r\n              </Link>\r\n\r\n              {/* <Link to=\"/content\" className=\"f-medium semi link-anim nav-el\">Полезное</Link> */}\r\n\r\n              <Link to=\"/responses\" className=\"f-medium semi link-anim nav-el\">Отклики</Link>\r\n\r\n              <button  className={\"nav-el nav__search \" + this.props.navState.searchActive} onClick={this.searchToggle}>\r\n                <span className=\"f-medium semi\">Поиск</span> \r\n                <img src={arrow} alt=\"arrow\"/>\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"nav__right-side\">\r\n              {/* <button  className=\"icon-anim nav-el\">\r\n                <img src={bell} alt=\"notifications\"/>\r\n              </button>\r\n\r\n              <button  className=\"icon-anim nav-el\">\r\n                <img src={star} alt=\"favourites\"/>\r\n              </button> */}\r\n              <div className=\"nav__profile-data nav-el\">\r\n                <div className=\"nav__profile-data__main link-anim\" onClick={this.dropdownToggle}>\r\n                  <Link to={this.getUserProfileLink()} className=\"f-medium semi flex\">\r\n                    <img className=\"nav__profile-data__avatar\" src={this.checkOnEmpty(this.props.navState.avatar, placeholderAvatar)} alt=\"аватар\"/>\r\n                  </Link>\r\n                  <button className=\"nav__profile-data__options-btn\">{this.props.userState.user.name}</button>\r\n                </div>\r\n                \r\n                <div className={\"nav__profile-data__dropdown bottom-rounded \" + this.props.navState.dropDownState}>\r\n                  <ul className=\"dropdown__list\">\r\n                    <li className=\"dropdown__list-el\" onClick={this.dropdownToggle}>\r\n                      <Link to={this.getUserProfileLink()} className=\"semi\">Моя страница</Link>\r\n                    </li>\r\n                    <li className=\"dropdown__list-el\" onClick={this.optionsPopupToggle}>\r\n                      <button to={this.getUserProfileLink()} className=\"semi\">Настройки</button>\r\n                    </li>\r\n                    <li className=\"dropdown__list-el\" onClick={this.logoutHandleFormSubmit}>\r\n                      <button className=\"semi\">Выход</button>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </nav>     \r\n        </div> \r\n      </div>\r\n      {this.props.navState.searchActive ? \r\n        <div className=\"search-panel active appearence-anim\">\r\n          <div className=\"container\">\r\n            <div className=\"search-panel__wrapper\">\r\n              <SearchPanel history={this.props.history}></SearchPanel>\r\n            </div>\r\n          </div>\r\n        </div>  \r\n      : ''}\r\n      {this.props.navState.optionsPopup.optionsPopupState === 'active'?(<OptionsPopup history={this.props.history}></OptionsPopup>):('')}\r\n    </div>\r\n    )\r\n      }\r\n    else return(\r\n    <div className={\"nav-block \" + this.props.navState.position + \" \" + this.props.navState.transparency}>\r\n      <div className=\"nav-bar\">\r\n        <div className=\"container\">\r\n          <nav className=\"nav\">\r\n            <div className=\"nav__left-side\">\r\n              <Link to=\"/landing\" className=\"nav-el\" >\r\n                <img src={logo} alt=\"logo\"/>\r\n              </Link>\r\n\r\n              {/* <Link to=\"/content\" className=\"f-medium semi link-anim nav-el\">Полезное</Link> */}\r\n\r\n              <button  className={\"nav-el nav__search \" + this.props.navState.searchActive} onClick={this.searchToggle}>\r\n                <span className=\"f-medium semi\" >Поиск</span> \r\n                <img src={arrow} alt=\"\"/>\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"nav__right-side\">\r\n              <button className=\"f-medium highlighted-btn semi nav-el\" onClick={this.registartionPopupOpen}>Начать карьеру</button>\r\n\r\n              <button className=\"f-medium semi link-anim nav-el\" onClick={this.loginPopupOpen}>Войти</button>\r\n            </div>    \r\n          </nav>     \r\n        </div>  \r\n      </div>\r\n      {this.props.navState.searchActive ? \r\n      <div className=\"search-panel active appearence-anim\">\r\n        <div className=\"container\">\r\n          <div className= \"search-panel__wrapper\">\r\n            <SearchPanel history={this.props.history}></SearchPanel>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      :''}\r\n      \r\n      \r\n      <Popup history={this.props.history}></Popup>\r\n\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) =>{\r\n  return {\r\n    navState: state.nav,\r\n    logged:state.user.logged,\r\n    userState:state.user,\r\n    userData:state.userData,\r\n    location:ownProps.ownProps.location.pathname,\r\n    history:ownProps.ownProps.history\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n  return{\r\n    onSearchActivate: () => {\r\n      dispatch({type : 'SEARCH_ACTIVATE', payload:null})\r\n    },\r\n    onSearchDeactivate: () => {\r\n      dispatch({type : 'SEARCH_DEACTIVATE', payload:null})\r\n    },\r\n    onLoginPopupActivate: (history) => {\r\n      history.push('/landing')\r\n      dispatch({type : 'POPUP_ACTIVATE', payload:'login'})\r\n    },\r\n    onRegistrationPopupActivate: (history) => {\r\n      history.push('/landing')\r\n      dispatch({type : 'POPUP_ACTIVATE', payload:'registration'})\r\n    },\r\n    onOptionsPopupActivate: () => {\r\n      dispatch({type : 'OPTIONS_POPUP_ACTIVATE', payload:null})\r\n    },\r\n    onOptionsPopupDeactivate: () => {\r\n      dispatch({type : 'OPTIONS_POPUP_DEACTIVATE', payload:null})\r\n    },\r\n    onDropDownActivate: () => {\r\n      dispatch({type : 'DROPDOWN_ACTIVATE', payload:null})\r\n    },\r\n    onDropDownDeactivate: () => {\r\n      dispatch({type : 'DROPDOWN_DEACTIVATE', payload:null})\r\n    },\r\n    onVerifyToken: ()=>{\r\n      dispatch(verify())\r\n      .then((data)=>{\r\n        if(data.data !== 403){\r\n          dispatch({type : 'USER_LOGIN', payload:null})\r\n        }\r\n      })\r\n      \r\n    },\r\n    onLogout: ()=>{\r\n      dispatch(logout())\r\n    },\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Nav);\r\n",["218","219"],"D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionBaseInfo.js",[],["220","221"],"D:\\react тесты\\diploma\\dev\\src\\App.js",[],"D:\\react тесты\\diploma\\dev\\src\\reducers\\userData.js",[],"D:\\react тесты\\diploma\\dev\\src\\reducers\\search.js",["222"],"D:\\react тесты\\diploma\\dev\\src\\components\\Loader\\Loader.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\Resumes\\Resumes.js",["223"],"import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport './resumes.css'\r\nimport { addResume} from '../../../actions/serverConnections'\r\nimport {getWorkTypeValues, getGradeValues} from '../../../scripts/commonScripts'\r\nimport plusIcon from '../../../img/plusIcon.svg'\r\nimport ResumeRedactPopup from './ResumeRedactPopup/ResumeRedactPopup'\r\nimport editIcon from '../../../img/edit.svg'\r\n\r\nclass Resumes extends Component {\r\n    addResume = (e) => {\r\n        return fetch('../new_cv.json', {\r\n            headers : { \r\n              'Content-Type': 'application/json',\r\n              'Accept': 'application/json'\r\n            }\r\n        })\r\n        .then(response => response.json())\r\n        .then(data => {\r\n            console.log(data)\r\n            data.user = this.props.userData.user\r\n            return data\r\n        })\r\n        .then (data => {\r\n            this.props.onPopupNewResumeActivate(data)\r\n            // return this.props.onAddResume(data, this.props.onPopupRedactResumeActivate)\r\n        })\r\n    }\r\n\r\n    redactResume = (index) =>{\r\n        this.props.onPopupRedactResumeActivate(index)\r\n    }\r\n\r\n    render() { \r\n        return (\r\n            <div className=\"resumes-block\">\r\n                {this.props.userState.logged ? (this.props.cvData.cvs.length !== 0 ?(<h2>Ваши Резюме:</h2>):('')):(this.props.cvData.cvs.length !== 0 ?(<h2>Резюме:</h2>):(''))}\r\n                <ul className=\"resumes-list\">\r\n                    {this.props.cvData.cvs.length !== 0 ? \r\n                    (this.props.cvData.cvs.map((el, index)=>\r\n                            (\r\n                            <li key={index} className=\"resume resumes-list-el rounded\">\r\n                                {el.state==='active' ? (<ResumeRedactPopup index={index}></ResumeRedactPopup>) : ('')}\r\n                                <section className={\"resume-main \" + (el.state === 'active' ? ('muted'):(''))}>\r\n                                    <div className={\"resume__header white top-rounded \" + this.props.cvData.cvs[index].bg_header_color}>\r\n                                        <div className=\"resume__header-top\">\r\n                                            <h2 className=\"resume__header__name bold f-large\">{el.vacancy_name}</h2>\r\n                                            <p><span className=\"resume__header__salary bold f-medium\">{el.salary}</span><span className=\"bold f-medium\"> руб.</span></p>\r\n                                        </div>\r\n                                        <div className=\"resume__header-bottom\">\r\n                                            <p className=\"resume__header__grade\">{getGradeValues(el.grade)}</p>\r\n                                            <p className=\"resume__publication-date sup\">{el.pub_date.slice(0,10)}</p>\r\n                                        </div>\r\n                                    </div>\r\n            \r\n                                    <div className=\"resume__main-info rounded\">\r\n                                        <p className=\"resume__industry f-pre\">{el.industry}</p>\r\n            \r\n                                        <p className=\"resume__work-type\">{el.work_type.map((item)=>getWorkTypeValues(item)).join(', ')}</p>\r\n            \r\n                                        <p className=\"resume__about\">{el.about}</p>\r\n            \r\n                                        {/* <ul className=\"resume__portfolio\">\r\n                                            <li className=\"resume__portfolio-el\">\r\n                                                <a className=\"resume__portfolio-el__link\" href=\"#\">\r\n                                                    <img src=\"\" alt=\"\"/>\r\n                                                </a>\r\n                                            </li>\r\n            \r\n                                            <li className=\"resume__portfolio-el\">\r\n                                                <a className=\"resume__portfolio-el__link\" href=\"#\">\r\n                                                    <img src=\"\" alt=\"\"/>\r\n                                                </a>\r\n                                            </li>\r\n                                        </ul> */}\r\n            \r\n                                        <ul className=\"resume__tags-list\">\r\n                                            {el.tags.map((tag, index)=><li key={index} className=\"resume__tags-list-el\">{tag}</li>)}\r\n\r\n                                        </ul>\r\n                                    </div>\r\n                                </section>\r\n                                {this.props.userState.logged && this.props.userState.user.id === this.props.userData.user?(\r\n                                    <button className=\"resume-redact-btn\"  onClick={this.redactResume.bind(this, index)}>\r\n                                        <img src={editIcon} alt=\"editIcon\"/>\r\n                                    </button>\r\n                                ):('')}\r\n                                \r\n                            </li>\r\n                            )\r\n                        )\r\n                    ):('')}\r\n\r\n                    {this.props.cvData.newCv.length!==0 ? (this.props.cvData.newCv.state==='active' ? (<ResumeRedactPopup index={this.props.cvData.cvs.length}></ResumeRedactPopup>) : ('')) : ('')}\r\n                </ul>\r\n                {this.props.userState.logged && this.props.userState.user.id === this.props.userData.user && this.props.cvData.newCv.state!=='active' ? (\r\n                    <div className=\"resume-add\">\r\n                        <p>Добавить резюме:</p>\r\n                        <button className=\"resume-add-btn\" onClick={this.addResume.bind(this, 0)}>\r\n                            <img src={plusIcon} alt=\"plusIcon\"/>\r\n                        </button>\r\n                    </div>)\r\n                :('')}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) =>{\r\n    return {\r\n        userState: state.user,\r\n        userData: state.userData,\r\n        cvData: state.cvs,\r\n    }\r\n  }\r\n  \r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        onPopupRedactResumeActivate: (resumeIndex) => {\r\n            dispatch({type : 'POPUP_REDACT_RESUME_ACTIVATE', payload:resumeIndex})\r\n        },\r\n        onPopupNewResumeActivate: (newCvData) => {\r\n            dispatch({type : 'POPUP_NEW_RESUME_ACTIVATE', payload:newCvData})\r\n        },\r\n\r\n    }\r\n    }\r\n  \r\nexport default connect(mapStateToProps, mapDispatchToProps)(Resumes);","D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\Resumes\\ResumeRedactPopup\\ResumeRedactPopup.js",[],["224","225"],"D:\\react тесты\\diploma\\dev\\src\\components\\Nav\\Popup\\Popup.js",["226"],"import React, { Component } from 'react'\r\n\r\nimport { connect } from 'react-redux'\r\nimport './popup.css'\r\nimport {registrateNewUser, loginUser} from '../../../actions/serverConnections.js'\r\nimport Loader from '../../Loader/Loader'\r\nimport fileUploader from '../../../actions/fileUploader';\r\n\r\n\r\nclass Popup extends Component {\r\n  \r\n  changeSubject(){\r\n    console.log(this.props.popupState.subject)\r\n    if (this.props.popupState.subject === 'employee'){\r\n      this.props.onSubjectChangeToEmployer();\r\n    }\r\n    else if (this.props.popupState.subject === 'employer'){\r\n      this.props.onSubjectChangeToEmployee();\r\n    }\r\n    console.log(this.props.popupState.submitValue)\r\n  }\r\n\r\n  popupClose(e){\r\n    this.props.onResetValidation()\r\n\r\n    e.preventDefault()\r\n    this.props.onPopupClose();\r\n  }\r\n\r\n  fetchError = (type) =>{\r\n    if (type === 'wrong-data'){\r\n      this.props.onWrongPasswordInput('*Неверный логин или пароль')\r\n    }\r\n    else if(type === 'wrong-email'){\r\n      this.props.onWrongEmailInput('*Такой э-мэйл не зарегестрирован')\r\n    }\r\n    else if(type === 'wrong-password'){\r\n      this.props.onWrongPasswordInput('*Пароль неверен')\r\n    }\r\n    else if(type === 'email-occupied'){\r\n      this.props.onWrongEmailInput('*Такой э-мэйл уже занят')\r\n    }\r\n    this.props.onDeactivateLoader()\r\n\r\n  }\r\n\r\n  redirectUser = (userId) =>{\r\n    this.props.onLoginUser();\r\n    this.getAvatarFromFirebase()\r\n    localStorage['user'] = JSON.stringify(this.props.userState)\r\n    if (this.props.userState.user_type === 'employee'){\r\n      this.props.history.push(\"/profile/\" + userId);\r\n    }\r\n    else{\r\n      this.props.history.push(\"/company/\" + userId);\r\n\r\n    }\r\n    this.props.onDeactivateLoader()\r\n  }\r\n\r\n  loginUser(login, password){\r\n\r\n    this.props.onLoginUserCheck({\r\n      \"email\": login,\r\n      \"password\": password\r\n    }, this.redirectUser, this.fetchError) // server response here\r\n    this.props.onActivateLoader()\r\n  }\r\n\r\n  registrateUser(data){\r\n    this.props.onRegistrationUserFetch(data, this.redirectUser, this.fetchError, this.props.onLoginUserCheck)\r\n    this.props.onActivateLoader()\r\n  }\r\n\r\n  validateEmail(email){\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n  }\r\n\r\n  validatePassword(password){\r\n    var re = /(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{4,}/;   // 4 or more characters\r\n                                                      // a digit\r\n                                                      // a lower-case letter\r\n                                                      // an upper-case letter\r\n    return re.test(password);\r\n  }\r\n\r\n  async registrationJsonCreate(login, password, username, type){\r\n    return {\r\n      \"name\": username,\r\n      \"email\": login,\r\n      \"password\": password,\r\n      \"user_type\": type\r\n    }\r\n    \r\n  }\r\n\r\n  handleFormSubmit = (e) => {\r\n    e.preventDefault();\r\n    let login = e.target.loginInput.value\r\n    let password = e.target.passwordInput.value\r\n    let validateInputs = [this.validateEmail(login), this.validatePassword(password)]\r\n    this.props.onResetValidation()\r\n    setTimeout(()=>{\r\n      if (validateInputs.includes(false)){\r\n        if (!this.validateEmail(login)){\r\n          this.props.onWrongEmailInput('*Неверный формат э-мэйл')\r\n        }\r\n        if (!this.validatePassword(password)){\r\n          this.props.onWrongPasswordInput('*В пароле должно содержаться не менее 4 символов, как минимум 1 цифра, 1 заглавная буква и 1 прописная буква')\r\n        }\r\n      }\r\n      else{\r\n        if (this.props.popupState.type === 'login'){\r\n          this.loginUser(login, password)\r\n        }\r\n        else if (this.props.popupState.type === 'registration'){\r\n          let username = e.target.nameInput.value\r\n\r\n          this.registrationJsonCreate(login, password, username, this.props.popupState.subject)\r\n          .then(data => this.registrateUser(data))\r\n        }\r\n      }\r\n    },0)\r\n  } \r\n\r\n  handleEsc = (e) => {\r\n    if (e.keyCode === 27) {\r\n      this.props.onPopupClose();\r\n    }\r\n  }\r\n\r\n  \r\n  getAvatarFromFirebase = () =>{   //пришлось делать кучу изменений состояний, потому что один flutter разработчик решил, что он не будет сохранять url. \r\n    const storageRef = fileUploader.storage().ref()\r\n    const fileRef = storageRef.child('user-avatar' + this.props.userState.id)\r\n    fileRef.getDownloadURL()\r\n    .then((response) => this.props.onSetUserMiniAvatar(response))\r\n    .catch(err => this.props.onSetUserMiniAvatar('https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-avatar.jpg?alt=media&token=5058f243-49e5-4df4-8686-899c6ce12c54'))\r\n  }\r\n  checkZoneClick(){}\r\n\r\n  componentDidMount(){\r\n    window.addEventListener('keydown', this.handleEsc)\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    window.removeEventListener('keydown', this.handleEsc)\r\n  }\r\n\r\n  render() {\r\n    if (this.props.popupState.type === 'login')\r\n      return (\r\n\r\n    <div className={\"blur-box \" + this.props.popupState.state} onClick={this.checkZoneClick.bind(this)}>\r\n      <div className=\"popup-wrapper rounded\">\r\n        <h2 className=\"popup-header\">Вход</h2>\r\n\r\n        <form className=\"\" action=\"\" method=\"post\" onSubmit={this.handleFormSubmit}>\r\n          <div className={\"input-field underline-anim wrong-\" + this.props.wrongEmail}>\r\n            <input className=\"popup__text-input\" id=\"loginInput\" name=\"loginInput\" type=\"text\" placeholder=\" \"/>\r\n            <label className=\"popup__text-label\" htmlFor=\"loginInput\">Логин</label>\r\n          </div>\r\n\r\n          <p className={\"email-input-hint \" + this.props.wrongEmail}>{this.props.wrongEmailError}</p>\r\n          \r\n          <div className={\"input-field underline-anim wrong-\" + this.props.wrongPassword}>\r\n            <input className=\"popup__text-input\" id=\"passwordInput\" name=\"passwordInput\" type=\"password\" placeholder=\" \"/>\r\n            <label className=\"popup__text-label\" htmlFor=\"passwordInput\">Пароль</label>\r\n          </div>\r\n\r\n          <p className={\"password-input-hint \" + this.props.wrongPassword}>{this.props.wrongPasswordError}</p>\r\n          \r\n          <div className=\"checkbox\">\r\n            <input className=\"inp-cbx\" id=\"morning\" type=\"checkbox\"/>\r\n            <label className=\"cbx\" htmlFor=\"morning\"><span>\r\n            <svg width=\"12px\" height=\"10px\">\r\n              <polyline points=\"1.5 6 4.5 9 10.5 1\"></polyline>\r\n            </svg></span><span>Запомните меня!</span></label>\r\n          </div>\r\n          <Loader active={this.props.loaderActive}></Loader>\r\n          <input className=\"form-submit-btn f-large rounded\" type=\"submit\" value=\"Войти!\"/>\r\n          <button className=\"close-popup-btn\" onClick={this.popupClose.bind(this)} tabIndex=\"-1\">x</button>\r\n\r\n          \r\n        </form>\r\n      </div>\r\n    </div>\r\n        )\r\n    else return (\r\n\r\n    <div className={\"blur-box \" + this.props.popupState.state}>\r\n      <div className=\"popup-wrapper rounded\">\r\n        <h2 className=\"popup-header\">Регистрация</h2>\r\n\r\n        <form method=\"post\" onSubmit={this.handleFormSubmit}>         \r\n\r\n          <div className={\"input-field underline-anim wrong-\" + this.props.wrongEmail}>\r\n            <input className=\"popup__text-input\" id=\"loginInput\" name=\"loginInput\" type=\"text\" placeholder=\" \"/>\r\n            <label className=\"popup__text-label\" htmlFor=\"loginInput\">Логин (почта)</label>\r\n          </div>\r\n\r\n          <p className={\"email-input-hint \" + this.props.wrongEmail}>{this.props.wrongEmailError}</p>\r\n          \r\n          <div className={\"input-field underline-anim wrong-\" + this.props.wrongPassword}>\r\n            <input className=\"popup__text-input\" id=\"passwordInput\" name=\"passwordInput\" type=\"password\" placeholder=\" \"/>\r\n            <label className=\"popup__text-label\" htmlFor=\"passwordInput\">Пароль</label>\r\n          </div>\r\n\r\n          <div className=\"input-field underline-anim\">\r\n            <input className=\"popup__text-input\" id=\"nameInput\" name=\"nameInput\" type=\"text\" placeholder=\" \"/>\r\n            <label className=\"popup__text-label\" htmlFor=\"nameInput\">Имя</label>\r\n          </div>\r\n\r\n          <p className={\"password-input-hint \" + this.props.wrongPassword}>{this.props.wrongPasswordError}</p>\r\n\r\n\r\n\r\n          <div className=\"togglebox\" >\r\n            <span>Я - </span>\r\n            <div className=\"main-capsule\">\r\n              <input type=\"checkbox\" id=\"hidcheck\" hidden onClick={this.changeSubject.bind(this)} />\r\n              <label className=\"capsule\" htmlFor=\"hidcheck\" id=\"capsule-id\" >\r\n                <div className=\"circle\"></div>\r\n                <div className=\"text-signs\">\r\n                  <span id=\"on\"></span>\r\n                </div>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"checkbox\">\r\n            <input className=\"inp-cbx\" id=\"morning\" type=\"checkbox\"/>\r\n            <label className=\"cbx\" htmlFor=\"morning\"><span>\r\n            <svg width=\"12px\" height=\"10px\">\r\n              <polyline points=\"1.5 6 4.5 9 10.5 1\"></polyline>\r\n            </svg></span><span>Запомните меня!</span></label>\r\n          </div>\r\n\r\n          <Loader active={this.props.loaderActive}></Loader>\r\n\r\n          <input className=\"form-submit-btn f-large rounded\" type=\"submit\" value={this.props.submitValue}/>\r\n\r\n          <button className=\"close-popup-btn\" onClick={this.popupClose.bind(this)} tabIndex=\"-1\">x</button>\r\n\r\n          <p>\r\nНажимая «Зарегистрироваться», вы подтверждаете, что ознакомлены, полностью согласны и принимаете условия <a href=\"#\">«Соглашения об оказании услуг по содействию в трудоустройстве (оферта)»</a></p>\r\n        </form>\r\n      </div>\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) =>{\r\n  return {\r\n    submitValue: state.nav.popup.submitValue,\r\n    wrongEmail:state.nav.popup.wrongEmail,\r\n    wrongPassword:state.nav.popup.wrongPassword,\r\n    popupActive: state.nav.popup.state,\r\n    popupState: state.nav.popup,\r\n    loaderActive: state.nav.popup.loaderActive,\r\n    wrongEmailError:state.nav.popup.wrongEmailError,\r\n    wrongPasswordError:state.nav.popup.wrongPasswordError,\r\n    userState:state.user.user\r\n\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n  return{\r\n    onSetUserMiniAvatar: (photo) => {\r\n      dispatch({type : 'SET_USER_MINI_AVATAR', payload:photo})\r\n    },\r\n    onSubjectChangeToEmployer: () => {\r\n      dispatch({type : 'CHANGE_SUBJECT_TO_EMPLOYER', payload:null})\r\n    },\r\n    onSubjectChangeToEmployee: () => {\r\n      dispatch({type : 'CHANGE_SUBJECT_TO_EMPLOYEE', payload:null})\r\n    },\r\n    onPopupClose: () => {\r\n      dispatch({type : 'POPUP_CLOSE', payload:null})\r\n    },\r\n    onWrongEmailInput: (errorMsg) => {\r\n      dispatch({type : 'WRONG_EMAIL_INPUT', payload:errorMsg})\r\n    },\r\n    onWrongPasswordInput: (errorMsg) => {\r\n      dispatch({type : 'WRONG_PASSWORD_INPUT', payload:errorMsg})\r\n    },\r\n    onResetValidation: ()=>{\r\n      dispatch({type : 'RESET_VALIDATION', payload:null})\r\n    },\r\n    onLoginUser: () => {\r\n      dispatch({type : 'USER_LOGIN', payload:null})\r\n    },\r\n\r\n    onLoginUserCheck: (data, redirectUser, fetchError) =>{\r\n      dispatch({type : 'WAITING_FOR_FETCH', payload:null})\r\n      dispatch(loginUser(data))\r\n      .then(data => {\r\n        console.log(data)\r\n        if (data.data !== null && data.data !== 0 && data.data !== undefined){\r\n          redirectUser(data.data.id)\r\n        }\r\n        else{\r\n          fetchError('wrong-data')\r\n        }\r\n      })\r\n    },\r\n    onRegistrationUserFetch: (data, redirectUser, fetchError, onLoginUserCheck) => {\r\n      const userCredentials = data\r\n      dispatch({type : 'WAITING_FOR_FETCH', payload:null})\r\n      dispatch(registrateNewUser(userCredentials))\r\n      .then(data => {\r\n        console.log(data)\r\n        if (data.data !== null && data.data !== 0 && data.data !== undefined){\r\n          onLoginUserCheck(userCredentials, redirectUser, fetchError)\r\n        }\r\n        else{\r\n          fetchError('email-occupied')\r\n        }\r\n      })\r\n      \r\n    },\r\n    \r\n    onActivateLoader: ()=>{\r\n      dispatch({type : 'ACTIVATE_LOADER', payload:null})\r\n    },\r\n    onDeactivateLoader: ()=>{\r\n      dispatch({type : 'DEACTIVATE_LOADER', payload:null})\r\n    }\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Popup);\r\n","D:\\react тесты\\diploma\\dev\\src\\components\\Nav\\OptionsPopup\\OptionsPopup.js",[],"D:\\react тесты\\diploma\\dev\\src\\scripts\\commonScripts.js",[],["227","228"],"D:\\react тесты\\diploma\\dev\\src\\components\\VacancyPopup\\VacancyPopup.js",["229"],"import React, { Component, useEffect } from 'react'\r\nimport {getVacancy} from '../../actions/serverConnections'\r\nimport {getGradeValues, getWorkTypeValues} from '../../scripts/commonScripts'\r\nimport { connect } from 'react-redux'\r\nimport './vacancyPopup.css'\r\n\r\nclass VacancyPopup extends Component {\r\n    componentDidMount(){\r\n        this.props.onGetVacancy(this.props.id)\r\n    }\r\n\r\n    popupClose(e){\r\n        e.preventDefault()\r\n        this.props.onCloseVacancyPopup();\r\n    }\r\n\r\n    render() {\r\n        console.log(Object.keys(this.props.openedVacancy).length)\r\n        if (Object.keys(this.props.openedVacancy).length !== 0)\r\n        return (\r\n            <div className=\"blur-box active\" onClick={this.popupClose.bind(this)}>\r\n                <div className=\"resume resumes-list-el popup-wrapper rounded\">\r\n                    <section className=\"resume-main\">\r\n                        <div className={\"resume__header white top-rounded \" + this.props.openedVacancy.bg_header_color}>\r\n                            <div className=\"resume__header-top\">\r\n                                <h2 className=\"resume__header__name bold f-large\">{this.props.openedVacancy.vacancy_name}</h2>\r\n                                <p><span className=\"resume__header__salary bold f-medium\">{this.props.openedVacancy.salary}</span><span className=\"bold f-medium\"> руб.</span></p>\r\n                            </div>\r\n                            <div className=\"resume__header-bottom\">\r\n                                <p className=\"resume__header__grade\">{getGradeValues(this.props.openedVacancy.grade)}</p>\r\n\r\n                                <p className=\"resume__publication-date sup\">{this.props.openedVacancy.pub_date.slice(0,10)}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"resume__main-info rounded\">\r\n                            <p className=\"resume__industry f-pre\">{this.props.openedVacancy.industry}</p>\r\n\r\n                            <p className=\"resume__work-type\">{this.props.openedVacancy.work_type.map((el)=>getWorkTypeValues(el)).join(', ')}</p>\r\n\r\n                            <div className=\"vacancy__about\">\r\n                                <p>{this.props.openedVacancy.leading}</p>\r\n                                <ul className=\"vacancy__about__body-list\">\r\n                                    {this.props.openedVacancy.body.map((el, index)=>\r\n                                        <li key={index}>\r\n                                            <h3 className=\"bold f-large\">{el.title}</h3>\r\n\r\n                                            <h4 className=\"bold f-medium\">{el.subtitle}</h4>\r\n\r\n                                            <ul className=\"vacancy__about__body-list__points-list\">\r\n                                            {el.points.map((point, ind) => \r\n                                                <li key={ind}>{point}</li>    \r\n                                            )}\r\n                                            </ul>\r\n                                        </li>\r\n                                    )}\r\n                                </ul>\r\n                                <p>{this.props.openedVacancy.trailing}</p>\r\n                            </div>\r\n                            \r\n                            <ul className=\"resume__tags-list\">\r\n                                {this.props.openedVacancy.tags.map((tag, index)=><li key={index} className=\"resume__tags-list-el\">{tag}</li>)}\r\n\r\n                            </ul>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <button className=\"close-popup-btn\" onClick={this.popupClose.bind(this)} tabIndex=\"-1\">x</button>\r\n                </div>\r\n            </div>\r\n        \r\n        )\r\n        else return ''\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => ({\r\n    openedVacancy:state.buf.openedVacancy,\r\n    id:ownProps.id\r\n})\r\n\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n    onGetVacancy: (id) => {\r\n        dispatch(getVacancy(id))\r\n    },\r\n    onCloseVacancyPopup: () => {\r\n        dispatch({type : 'CLOSE_VACANCY_POPUP', payload:null})\r\n\r\n    }\r\n})\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(VacancyPopup);\r\n\r\n","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\CompanyProfile.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\ProfileRedactPopup.js",["230","231"],"import React, {Component} from 'react'\r\nimport Loader from '../../Loader/Loader'\r\nimport { connect } from 'react-redux'\r\nimport './profileRedactPopup.css'\r\nimport MainPlaceholder from './MainPlaceholder'\r\nimport {createNewEmployee, createNewEmployer, updateEmployee, getUserData} from '../../../actions/serverConnections'\r\nimport \"cropperjs/dist/cropper.css\";\r\n\r\nimport RedactPopupSectionBaseInfo from './redactPopupSections/RedactPopupSectionBaseInfo'\r\nimport RedactPopupSectionExperience from './redactPopupSections/RedactPopupSectionExperience'\r\nimport RedactPopupSectionImages from './redactPopupSections/RedactPopupSectionImages'\r\n\r\nimport baseInfoIcon from '../../../img/baseInfo.svg'\r\nimport experienceIcon from '../../../img/experience.svg'\r\nimport personalizationIcon from '../../../img/personalization.svg'\r\n\r\n\r\nclass ProfileRedactPopup extends Component {\r\n    popupClose(e){\r\n        e.preventDefault()\r\n        this.props.onPopupRedactProfileDeactivate();\r\n    }\r\n\r\n    saveRedactProfileFormChanges = (e) =>{\r\n        e.preventDefault();\r\n\r\n        let data = {\r\n            \"user_id\": this.props.userState.user.id,\r\n            \"gender\":this.props.placeholderData.gender,\r\n            \"name\":this.props.placeholderData.userName,\r\n            \"mailing\": true,\r\n            \"language\": this.props.profileState.language,\r\n            \"birthday\": this.props.placeholderData.birthday,\r\n            \"address\": this.props.profileState.address,\r\n            \"phone\": this.props.profileState.userPhones,\r\n            \"about\": this.props.placeholderData.description,\r\n            \"social_links\": [],\r\n            \"education\": this.props.profileState.education,\r\n            \"experience\": this.props.profileState.experience,\r\n            \"citizenship\": this.props.placeholderData.citizenship,\r\n            \"profile_link\": \"\",\r\n            \"photo_url\": this.props.placeholderData.photo_url,\r\n            \"profile_background\": this.props.placeholderData.profile_background\r\n        }\r\n\r\n        if (this.props.userState.user.user_type === 'employee'){\r\n            this.props.onUpdateEmployee(data, this.props.userState.user.id, this.props.onGetUserFetch, this.props.onHasProfile)\r\n        }\r\n        else this.props.onUpdateEmployer(data, this.props.userState.user.id, this.props.onGetUserFetch, this.props.onHasProfile)\r\n\r\n        this.props.onPopupRedactProfileDeactivate();\r\n    }\r\n\r\n    changeSection(section) {\r\n        this.props.onChangeSection(section)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={\"no-fix-blur-box rounded profile-redact \" + this.props.profileState.state}>\r\n                <div className=\"profile-redact__popup-wrapper\">\r\n                    <MainPlaceholder></MainPlaceholder>\r\n                    <div className=\"profile-redact__form\">\r\n                        <div className=\"profile-redact__form-nav\">\r\n                            <button className={\"popup-nav-btn rounded \" + (this.props.profileState.popupRedactActiveSection === 'baseInfo' ? 'active' : '')} onClick={this.changeSection.bind(this, 'baseInfo')}>\r\n                                <img src={baseInfoIcon} alt=\"Базовая информация\"/>\r\n                            </button>\r\n                            <button className={\"popup-nav-btn rounded \" + (this.props.profileState.popupRedactActiveSection === 'experience' ? 'active' : '')} onClick={this.changeSection.bind(this, 'experience')}>\r\n                                <img src={experienceIcon} alt=\"Опыт и образование\"/>\r\n                            </button>\r\n                            <button className={\"popup-nav-btn rounded \" + (this.props.profileState.popupRedactActiveSection === 'images' ? 'active' : '')} onClick={this.changeSection.bind(this, 'images')}>\r\n                                <img src={personalizationIcon} alt=\"Персонализация\"/>\r\n                            </button>\r\n                        </div>\r\n                        {this.props.profileState.popupRedactActiveSection === 'baseInfo' ? (<RedactPopupSectionBaseInfo></RedactPopupSectionBaseInfo>) : ('')}\r\n                        {this.props.profileState.popupRedactActiveSection === 'experience' ? (<RedactPopupSectionExperience></RedactPopupSectionExperience>) : ('')}\r\n                        {this.props.profileState.popupRedactActiveSection === 'images' ? (<RedactPopupSectionImages></RedactPopupSectionImages>) : ('')}\r\n\r\n                        <button className=\"form-submit-btn f-large rounded bold\" onClick={this.saveRedactProfileFormChanges}>Сохранить изменения</button>\r\n                        <button className=\"profile-redact__close-popup-btn\" onClick={this.popupClose.bind(this)} tabIndex=\"-1\">x</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) =>{\r\n    return {\r\n        profileState: state.profile,\r\n        userState: state.user,\r\n        placeholderData: state.profile.placeholder,\r\n        loaderActive: state.nav.popup.loaderActive,\r\n        cropperActive: state.profile.buf.cropper.state,\r\n        cropperData:state.profile.buf.cropper\r\n\r\n    }\r\n  }\r\n  \r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        onPopupRedactProfileDeactivate: () => {\r\n            dispatch({type : 'POPUP_REDACT_PROFILE_DEACTIVATE', payload:null})\r\n        },\r\n        onChangeSection: (section) => {\r\n            dispatch({type : 'POPUP_REDACT_CHANGE_SECTION', payload:section})\r\n        },\r\n        onActivateLoader: ()=>{\r\n            dispatch({type : 'ACTIVATE_PROFILE_REDACT_LOADER', payload:null})\r\n        },\r\n        onDeactivateLoader: ()=>{\r\n            dispatch({type : 'DEACTIVATE_PROFILE_REDACT_LOADER', payload:null})\r\n        },\r\n        onCreateNewEmployee:(data, userId, onGetUserFetch, onHasProfile)=>{\r\n            dispatch({type : 'WAITING_FOR_FETCH', payload:null})\r\n            dispatch(createNewEmployee(data))\r\n            .then(data => onGetUserFetch(userId, onHasProfile))\r\n        },\r\n        onCreateNewEmployer:()=>{\r\n            dispatch({type : 'WAITING_FOR_FETCH', payload:null})\r\n        },\r\n        onUpdateEmployee:(data, userId, onGetUserFetch, onHasProfile)=>{\r\n            dispatch({type : 'WAITING_FOR_FETCH', payload:null})\r\n            dispatch(updateEmployee(data, userId))\r\n            .then(data => onGetUserFetch(userId, onHasProfile))\r\n        },\r\n        onUpdateEmployer:()=>{\r\n            dispatch({type : 'WAITING_FOR_FETCH', payload:null})\r\n        },\r\n        onHasProfile: () => {\r\n          dispatch({type : 'USER_HAS_PROFILE', payload:null})\r\n        },\r\n        onGetUserFetch: (userId, onHasProfile)=> {\r\n          dispatch(getUserData(userId))\r\n          .then((data)=>{\r\n              if (data.userData !== null){\r\n                  console.log(data.userData)\r\n                  onHasProfile()\r\n              }\r\n          })\r\n        },\r\n    }\r\n}\r\n  \r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProfileRedactPopup);","D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\ImageCropper.js",["232"],"import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Cropper from \"react-cropper\";\r\nimport firebase from \"firebase\";\r\nimport fileUploader from '../../../actions/fileUploader';\r\nimport \"cropperjs/dist/cropper.css\";\r\nimport closeIcon from '../../../img/close.svg';\r\nimport uploadIcon from '../../../img/upload.svg';\r\n\r\n\r\nclass ImageCropper extends Component {\r\n    cropUserImage = (file, maxWidth, maxHeight, imageType) => {\r\n        this.props.onDeactivateCropper()\r\n        setTimeout(()=>{\r\n            if (file !== undefined){\r\n                this.props.onActivateCropper(file, maxWidth, maxHeight, imageType)\r\n            }\r\n        }, 0)\r\n    }\r\n\r\n    loadImageToFirebase = (image, imageType) =>{\r\n        console.log(image)\r\n        if (image !== undefined){\r\n            const storageRef = fileUploader.storage().ref()\r\n            const fileRef = storageRef.child('user-' + imageType + this.props.userState.user.id)\r\n            fileRef.put(image).then((response)=>{\r\n                fileRef.getDownloadURL()\r\n                .then((response) => {\r\n                    console.log(response)\r\n                    if (imageType === 'avatar'){\r\n                        this.props.onChangeAvatar(response)\r\n                    }\r\n                    else if(imageType === 'personal-background'){\r\n                        this.props.onChangePersonalBackground(response)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n\r\n    }\r\n    \r\n    getCropperData = () => {\r\n        this.props.onDeactivateCropper()\r\n\r\n        if (typeof this.props.cropperData.instance !== \"undefined\") {\r\n          const croppedImage = this.dataURLtoBlob(this.props.cropperData.instance.getCroppedCanvas().toDataURL());\r\n          this.loadImageToFirebase(croppedImage, this.props.cropperData.imageType)\r\n        }\r\n    };\r\n\r\n    dataURLtoBlob = (dataurl) => {\r\n        var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\r\n            bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\r\n        while(n--){\r\n            u8arr[n] = bstr.charCodeAt(n);\r\n        }\r\n        return new Blob([u8arr], {type:mime});\r\n    }\r\n\r\n    loadUserImage = (e, imageType) =>{\r\n        const file = e.target.files[0];\r\n        this.loadImageToFirebase(file, imageType)\r\n    }\r\n\r\n    deactivateCropper = () =>{\r\n        this.props.onDeactivateCropper()\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.cropperFile){\r\n            if(this.props.cropperData.imageType === 'avatar'){\r\n                this.props.onSetCropperFile('https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-avatar.jpg?alt=media&token=5058f243-49e5-4df4-8686-899c6ce12c54')\r\n            }\r\n            else this.props.onSetCropperFile('https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-background.png?alt=media&token=1c91f99c-c236-4a28-b291-bfc2263df45b')\r\n        }\r\n\r\n        return this.props.cropperActive ? (\r\n            <div className=\"cropper-block\">\r\n                {console.log(this.props.cropperFile)}\r\n                <div\r\n                    className={\"cropper__img-preview \" + this.props.cropperData.imageType}\r\n                    style={{ width: this.props.cropperMaxWidth, height: this.props.cropperMaxHeight, overflow:\"hidden\"}}\r\n                />\r\n\r\n                <Cropper\r\n                style={{ width: \"100%\", maxHeight: \"400px\",minHeight: \"400px\", backgroundColor:\"#fff\" }}\r\n                aspectRatio={this.props.cropperMaxWidth / this.props.cropperMaxHeight}\r\n\r\n                preview=\".cropper__img-preview\"\r\n                src={this.props.cropperFile}\r\n                viewMode={1}\r\n                dragMode='move'\r\n                guides={true}\r\n                minCropBoxHeight={10}\r\n                minCropBoxWidth={10}\r\n                background={false}\r\n                responsive={true}\r\n                autoCropArea={1}\r\n                checkOrientation={false} // https://github.com/fengyuanchen/cropperjs/issues/671\r\n                onInitialized={(instance) => {\r\n                    this.props.setCropperInstance(instance);\r\n                }}\r\n                />\r\n                \r\n                <div className=\"cropper-controls\">\r\n                    <button className=\"cropper-upload-btn\" onClick={this.getCropperData}>\r\n                        <img src={uploadIcon} alt=\"uploadIcon\"/>\r\n                    </button>\r\n\r\n                    <button className=\"cropper-close-btn\" onClick={this.deactivateCropper}>\r\n                        <img src={closeIcon} alt=\"closeIcon\"/>\r\n                    </button>\r\n                </div>\r\n\r\n\r\n            </div>\r\n            \r\n        ) : ('')\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        cropperMaxWidth:state.companyProfile.buf.cropper.maxWidth,\r\n        cropperMaxHeight:state.companyProfile.buf.cropper.maxHeight,\r\n        cropperFile:state.companyProfile.buf.cropper.file,\r\n        cropperActive:state.companyProfile.buf.cropper.state,\r\n        cropperData:state.companyProfile.buf.cropper,\r\n        userState: state.user,\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        setCropperInstance: (instance) => {\r\n            dispatch({type : 'SET_CROPPER_INSTANCE', payload:instance})\r\n        },\r\n        onChangeAvatar: (fileUrl)=>{\r\n            dispatch({type : 'PROFILE_EMPLOYER_REDACT_AVATAR_CHANGE', payload:fileUrl})\r\n        },\r\n        onChangePersonalBackground: (fileUrl)=>{\r\n            dispatch({type : 'POPUP_EMPLOYER_REDACT_PERSONAL_BACKGROUND_CHANGE', payload:fileUrl})\r\n        },\r\n        onDeactivateCropper:()=>{\r\n            dispatch({type : 'PROFILE_EMPLOYER_REDACT_DEACTIVATE_IMAGE_CROPPER', payload:null})\r\n        },\r\n        onSetCropperFile:(file) => {\r\n            dispatch({type : 'SET_CROPPER_FILE', payload:file})\r\n        },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageCropper)\r\n","D:\\react тесты\\diploma\\dev\\src\\components\\leafletMap\\LeafletMap.js",["233","234","235"],"import React, { useEffect } from \"react\";\r\nimport { connect } from 'react-redux'\r\n\r\nimport { useState } from 'react';\r\nimport '../../css/leaflet.css'\r\nimport '../../css/geosearch.css'\r\nimport L from \"leaflet\";\r\nimport { MapContainer , TileLayer, useMapEvents, Marker, Popup, useMap } from \"react-leaflet\";\r\nimport { GeoSearchControl, OpenStreetMapProvider } from 'leaflet-geosearch';\r\nimport leafletKnn from 'leaflet-knn'\r\nimport {testCities} from './testCities'\r\n// import marker icons\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nconst searchControl = new GeoSearchControl({\r\n  provider: new OpenStreetMapProvider(),\r\n});\r\n\r\nfunction DisplayPosition({onChangeMapPosition}) {\r\n    const map = useMap()\r\n    console.log(searchControl.searchElement.input.value)\r\n    \r\n    const onMove = () => {\r\n        const pos = map.getCenter()\r\n        var gj = L.geoJson(testCities);\r\n\r\n        const name = searchControl.searchElement.input.value === '' ? leafletKnn(gj).nearestLayer([pos.lng, pos.lat],1)[0].layer.feature.properties.name : searchControl.searchElement.input.value\r\n        onChangeMapPosition({\r\n            name: name,\r\n            lat:pos.lat,\r\n            lng:pos.lng\r\n        })\r\n        \r\n    }\r\n  \r\n    useEffect(() => {\r\n      map.on('move', onMove)\r\n      map.on('geosearch_showlocation', function (result) {\r\n        L.marker([result.x, result.y]).addTo(map)\r\n      });\r\n      return () => {\r\n        map.off('move', onMove)\r\n      }\r\n    }, [map, onMove])\r\n\r\n    return null\r\n  }\r\n  \r\n\r\nfunction findStartPosition(data, map, onChangeMapPosition){\r\n    // provider.search({ query: \"99 Southwark St, London SE1 0JF, UK\" })\r\n    // .then(value => {})\r\n    var lat = data.lat;\r\n    var lng = data.lng;\r\n    var label = data.name;\r\n    var marker = L.marker([lat, lng]).addTo(map)\r\n    marker.bindPopup(label).openPopup();\r\n    map.setView([lat, lng], 13)\r\n    const pos = map.getCenter()\r\n    \r\n}\r\n\r\n\r\nfunction LocationMarker() {\r\n    const [position, setPosition] = useState(null)\r\n\r\n    const map = useMapEvents({\r\n      click() {\r\n        map.locate()\r\n      },\r\n      locationfound(e) {\r\n        map.flyTo(e.latlng, map.getZoom())\r\n      },\r\n    })\r\n  \r\n    return position === null ? null : (\r\n      <Marker position={position}>\r\n        <Popup>Вы здесь</Popup>\r\n      </Marker>\r\n    )\r\n}\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl:\r\n    \"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon-2x.png\",\r\n  iconUrl: \"https://unpkg.com/leaflet@1.4.0/dist/images/marker-icon.png\",\r\n  shadowUrl: \"https://unpkg.com/leaflet@1.4.0/dist/images/marker-shadow.png\"\r\n});\r\n\r\nfunction MapComp ({address, onChangeMapPosition}) {\r\n    console.log(address)\r\n    \r\n    function initMap(map){\r\n        map.addControl(searchControl);\r\n    }\r\n\r\n    const center = (address !== undefined && address !== null) ? [address.lat, address.lng] : [0, 0];\r\n    return (\r\n        <MapContainer \r\n            style={{ height: \"30vh\" }}\r\n            center={center}\r\n            zoom=\"10\"\r\n            whenCreated={map=>{\r\n                initMap(map)\r\n                if (address !== undefined && address !== null) findStartPosition(address, map, onChangeMapPosition)\r\n            }}\r\n        >\r\n            <TileLayer\r\n            attribution=\"&copy; <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors\"\r\n            url={\"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}\r\n            />\r\n            <LocationMarker></LocationMarker>\r\n            <DisplayPosition onChangeMapPosition={onChangeMapPosition}></DisplayPosition>\r\n        </MapContainer >\r\n    \r\n    );\r\n  \r\n}\r\n\r\n\r\nconst mapStateToProps = (state, ownProps) =>{\r\n    return {\r\n        address:ownProps.address\r\n    }   \r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        onLeafletMapInit: (m) => {\r\n            dispatch({type : 'INIT_LEAFLET_MAP', payload:m})\r\n        },\r\n        onChangeMapPosition: (position) => {\r\n            dispatch({type : 'CHANGE_LEAFLET_MAP_POSITION', payload:position})\r\n        },\r\n        \r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MapComp);\r\n\r\n","D:\\react тесты\\diploma\\dev\\src\\components\\Landing\\Landing.js",["236"],"import React, { Component } from 'react'\r\nimport './landing.css'\r\nimport { connect } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport {getSearchQueries} from '../../actions/serverConnections'\r\nimport {searchLoaderDeactivate, searchLoaderActivate} from '../../actions/asyncDispatch'\r\nimport fileUploader from '../../actions/fileUploader';\r\nimport {getGradeValues, getWorkTypeValues, parseOptions, searchTypeToUserType} from '../../scripts/commonScripts'\r\nimport { InView } from \"react-intersection-observer\";\r\n\r\n\r\n\r\nclass Landing extends Component {\r\n    getSearchValues = () => {\r\n        console.log('get')\r\n        if (this.props.searchState.searchLoading === false){\r\n            setTimeout(()=>{\r\n                this.props.onGetSearchResponse(parseOptions(this.props.searchOptions), this.props.searchOptions.searchType, this.props.searchState.next, this.getAvatarFromFirebase)\r\n            },0)\r\n        }\r\n    }\r\n\r\n    getAvatarFromFirebase = (id, pk) =>{   //пришлось делать кучу изменений состояний, потому что один flutter разработчик решил, что он не будет сохранять url. \r\n        const storageRef = fileUploader.storage().ref()\r\n        const fileRef = storageRef.child('user-avatar' + id)\r\n        fileRef.getDownloadURL()\r\n        .then((response) => this.props.onSetValuePhoto(response, pk))\r\n        .catch(err => this.props.onSetValuePhoto('https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-avatar.jpg?alt=media&token=5058f243-49e5-4df4-8686-899c6ce12c54', pk))\r\n    }\r\n\r\n    componentDidMount(){\r\n        \r\n        console.log(this.props.searchState)\r\n        this.getSearchValues()\r\n    }\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"landing-wrapper\">\r\n                <div className=\"landing__main white\">\r\n                    <h2 className=\"f-extra-large bold main-header\">Пора встать на первую ступень своей карьерной лестницы!</h2>\r\n                </div>\r\n    \r\n                <ul className=\"landing__recomendations\">\r\n                    {this.props.searchValues.map((item, index) =>\r\n                        <li key={index} className=\"resume resumes-landing-list-el rounded\">\r\n                        <section className=\"resume-main\">\r\n                            <div className={\"resume__header white top-rounded \" + item.bg_header_color }>\r\n                                <div className=\"resume__header-top\">\r\n                                    <h2 className=\"resume__header__name bold text-overflow\">{item.vacancy_name}</h2>\r\n                                    <p>\r\n                                        {item.salary === -1 ? <span className=\"resume__header__salary bold text-overflow\">Зарплата не указана</span>:\r\n                                        <span className=\"resume__header__salary bold text-overflow\">{item.salary} руб.</span>}\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"resume__header-bottom\">\r\n                                    <p className=\"resume__header__grade\">{getGradeValues(item.grade)}</p>\r\n                                    <p className=\"resume__publication-date sup\">{item.pub_date.slice(0, 10)}</p>\r\n                                </div>\r\n                                \r\n                            </div>\r\n    \r\n                            <div className=\"resume__main-info bottom-rounded flex\">\r\n                                <div className=\"resume__main-info__text\">\r\n                                    <p className=\"resume__industry f-pre\">{item.industry}</p>\r\n    \r\n                                    <p className=\"resume__work-type\">{item.work_type.map((item)=>getWorkTypeValues(item)).join(', ')}</p>\r\n\r\n                                    <p className=\"resume__about\">{item.about || item.leading}</p>\r\n                                </div>\r\n                                \r\n    \r\n                                {/* <ul className=\"resume__tags-list\">\r\n                                    {item.tags.map((tag, index)=><li key={index} className=\"resume__tags-list-el\">{tag}</li>)}\r\n                                </ul> */}\r\n                                <Link className=\"resume__main-info__avatar-name-block\" to={\"/\"+searchTypeToUserType(this.props.searchOptions.searchType)+\"/\" + item.owner_id}>\r\n                                    <img className=\"avatar-name-block__small-avatar\" src={item.photo_url} alt=\"аватар\"/>\r\n                                    <p>{item.owner}</p>\r\n                                </Link>\r\n                            </div>\r\n                        </section>\r\n                    </li>\r\n                    )}\r\n                </ul>\r\n                <InView as=\"div\" onChange={(inView, entry) => {\r\n                    console.log(inView)\r\n                    if (inView) this.getSearchValues(false)}}>\r\n                </InView>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\n\r\nconst mapStateToProps = (state) =>{\r\n    return {\r\n        searchState:state.search,\r\n        searchOptions:state.search.searchOptions,\r\n        searchValues:state.search.searchValues,\r\n    }\r\n  }\r\n  \r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        onNullifyValues: () => {\r\n            dispatch({type : 'SEARCH_NULLIFY_VALUES', payload:null})\r\n        },\r\n        onNullifySearchOptions: () => {\r\n            dispatch({type : 'SEARCH_NULLIFY_OPTIONS', payload:null})\r\n        },\r\n        onUpdateValues: (values) => {\r\n            dispatch({type : 'SEARCH_UPDATE_VALUES', payload:values})\r\n        },\r\n        onSortValues: (values) => {\r\n            dispatch({type : 'SEARCH_SORT_VALUES', payload:values})\r\n        },\r\n        onChangeSearchQuery: (query) => {\r\n            dispatch({type : 'CHANGE_SEARCH_QUERY', payload:query})\r\n        },\r\n        \r\n        onGetSearchResponse:(options, searchType, next, getAvatarFromFirebase)=>{\r\n            dispatch(searchLoaderActivate())\r\n            dispatch(getSearchQueries(options, searchType, next))\r\n            .then((data)=>{\r\n                if (data.data !== null && data.data !== 404){\r\n                    dispatch({type : 'SEARCH_UPDATE_OPTIONS', payload:data.data.next})\r\n                    dispatch({type : 'SEARCH_UPDATE_RESULTS_COUNT', payload:data.data.count})\r\n                    dispatch({type : 'SEARCH_UPDATE_VALUES', payload:data.data.results}) \r\n                    data.data.results.map((item) => {\r\n                        if (item.photo_url === \"\") getAvatarFromFirebase(item.owner_id, item.pk)\r\n                    })\r\n                }\r\n            })\r\n            .then(response => dispatch(searchLoaderDeactivate()))\r\n            \r\n        },\r\n        onSetValuePhoto: (photo, id) => {\r\n            console.log('photo')\r\n            dispatch({type : 'SEARCH_UPDATE_VALUES_PHOTO', payload:{photo:photo, id:id}})\r\n        },\r\n    }\r\n}\r\n  \r\nexport default connect(mapStateToProps, mapDispatchToProps)(Landing);","D:\\react тесты\\diploma\\dev\\src\\components\\leafletMap\\testCities.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionBaseInfo.js",["237"],"D:\\react тесты\\diploma\\dev\\src\\reducers\\user.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\Side\\Side.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\MainPlaceholder.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\ImageCropper.js",["238"],"import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Cropper from \"react-cropper\";\r\nimport firebase from \"firebase\";\r\nimport fileUploader from '../../../actions/fileUploader';\r\nimport \"cropperjs/dist/cropper.css\";\r\nimport closeIcon from '../../../img/close.svg';\r\nimport uploadIcon from '../../../img/upload.svg';\r\n\r\n\r\nclass ImageCropper extends Component {\r\n    cropUserImage = (file, maxWidth, maxHeight, imageType) => {\r\n        this.props.onDeactivateCropper()\r\n        console.log(file)\r\n        setTimeout(()=>{\r\n            if (file !== undefined){\r\n                this.props.onActivateCropper(file, maxWidth, maxHeight, imageType)\r\n            }\r\n        }, 0)\r\n    }\r\n\r\n    loadImageToFirebase = (image, imageType) =>{\r\n        console.log(image)\r\n        if (image !== undefined){\r\n            const storageRef = fileUploader.storage().ref()\r\n            const fileRef = storageRef.child('user-' + imageType + this.props.userState.user.id)\r\n            fileRef.put(image).then((response)=>{\r\n                fileRef.getDownloadURL()\r\n                .then((response) => {\r\n                    console.log(response)\r\n                    if (imageType === 'avatar'){\r\n                        this.props.onChangeAvatar(response)\r\n                    }\r\n                    else if(imageType === 'personal-background'){\r\n                        this.props.onChangePersonalBackground(response)\r\n                    }\r\n                })\r\n            })\r\n        }\r\n\r\n    }\r\n    \r\n    getCropperData = () => {\r\n        this.props.onDeactivateCropper()\r\n\r\n        if (typeof this.props.cropperData.instance !== \"undefined\") {\r\n          const croppedImage = this.dataURLtoBlob(this.props.cropperData.instance.getCroppedCanvas().toDataURL());\r\n          this.loadImageToFirebase(croppedImage, this.props.cropperData.imageType)\r\n        }\r\n    };\r\n\r\n    dataURLtoBlob = (dataurl) => {\r\n        var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\r\n            bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\r\n        while(n--){\r\n            u8arr[n] = bstr.charCodeAt(n);\r\n        }\r\n        return new Blob([u8arr], {type:mime});\r\n    }\r\n\r\n\r\n    loadUserImage = (e, imageType) =>{\r\n        const file = e.target.files[0];\r\n        this.loadImageToFirebase(file, imageType)\r\n    }\r\n\r\n    deactivateCropper = () =>{\r\n        this.props.onDeactivateCropper()\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.cropperFile){\r\n            if(this.props.cropperData.imageType === 'avatar'){\r\n                this.props.onSetCropperFile('https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-avatar.jpg?alt=media&token=5058f243-49e5-4df4-8686-899c6ce12c54')\r\n            }\r\n            else this.props.onSetCropperFile('https://firebasestorage.googleapis.com/v0/b/diploma-55e3f.appspot.com/o/placeholder-background.png?alt=media&token=1c91f99c-c236-4a28-b291-bfc2263df45b')\r\n        }\r\n\r\n\r\n        return this.props.cropperActive && this.props.cropperFile ? (\r\n            <div className=\"cropper-block\">\r\n                <div\r\n                    className={\"cropper__img-preview \" + this.props.cropperData.imageType}\r\n                    style={{ width: this.props.cropperMaxWidth, height: this.props.cropperMaxHeight, overflow:\"hidden\"}}\r\n                />\r\n\r\n                <Cropper\r\n                style={{ width: \"100%\", height: \"400px\", backgroundColor:\"#fff\" }}\r\n                aspectRatio={this.props.cropperMaxWidth / this.props.cropperMaxHeight}\r\n\r\n                preview=\".cropper__img-preview\"\r\n                src={this.props.cropperFile}\r\n                viewMode={1}\r\n                dragMode='move'\r\n                guides={true}\r\n                minCropBoxHeight={10}\r\n                minCropBoxWidth={10}\r\n                background={false}\r\n                responsive={true}\r\n                autoCropArea={1}\r\n                checkOrientation={false} \r\n                onInitialized={(instance) => {\r\n                    this.props.setCropperInstance(instance);\r\n                }}\r\n                />\r\n                \r\n                <div className=\"cropper-controls\">\r\n                    <button className=\"cropper-upload-btn\" onClick={this.getCropperData}>\r\n                        <img src={uploadIcon} alt=\"uploadIcon\"/>\r\n                    </button>\r\n\r\n                    <button className=\"cropper-close-btn\" onClick={this.deactivateCropper}>\r\n                        <img src={closeIcon} alt=\"closeIcon\"/>\r\n                    </button>\r\n                </div>\r\n\r\n\r\n            </div>\r\n            \r\n        ) : ('')\r\n    }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        cropperMaxWidth:state.profile.buf.cropper.maxWidth,\r\n        cropperMaxHeight:state.profile.buf.cropper.maxHeight,\r\n        cropperFile:state.profile.buf.cropper.file,\r\n        cropperActive:state.profile.buf.cropper.state,\r\n        cropperData:state.profile.buf.cropper,\r\n        userState: state.user,\r\n\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) =>{\r\n    return{\r\n        setCropperInstance: (instance) => {\r\n            dispatch({type : 'SET_CROPPER_INSTANCE', payload:instance})\r\n        },\r\n        onChangeAvatar: (fileUrl)=>{\r\n            dispatch({type : 'POPUP_REDACT_AVATAR_CHANGE', payload:fileUrl})\r\n        },\r\n        onChangePersonalBackground: (fileUrl)=>{\r\n            dispatch({type : 'POPUP_REDACT_PERSONAL_BACKGROUND_CHANGE', payload:fileUrl})\r\n        },\r\n        onDeactivateCropper:()=>{\r\n            dispatch({type : 'DEACTIVATE_PROFILE_REDACT_IMAGE_CROPPER', payload:null})\r\n        },\r\n        onSetCropperFile:(file) => {\r\n            dispatch({type : 'SET_CROPPER_FILE', payload:file})\r\n        },\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ImageCropper)\r\n","D:\\react тесты\\diploma\\dev\\src\\actions\\fileUploader.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionImages.js",[],"D:\\react тесты\\diploma\\dev\\src\\reducers\\profile.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\ProfileRedactPopup.js",["239","240"],"D:\\react тесты\\diploma\\dev\\src\\reducers\\vacancy.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\Main\\Main.js",["241","242"],"D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\Side\\Side.js",[],"D:\\react тесты\\diploma\\dev\\src\\actions\\asyncDispatch.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\CompanyProfile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionImages.js",[],"D:\\react тесты\\diploma\\dev\\src\\reducers\\nav.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\redactPopupSections\\RedactPopupSectionExperience.js",[],"D:\\react тесты\\diploma\\dev\\src\\components\\Profile\\ProfileRedactPopup\\MainPlaceholder.js",["243","244"],{"ruleId":"245","replacedBy":"246"},{"ruleId":"247","replacedBy":"248"},{"ruleId":"249","severity":1,"message":"250","line":115,"column":50,"nodeType":"251","messageId":"252","endLine":115,"endColumn":52},{"ruleId":"249","severity":1,"message":"250","line":130,"column":50,"nodeType":"251","messageId":"252","endLine":130,"endColumn":52},{"ruleId":"245","replacedBy":"253"},{"ruleId":"247","replacedBy":"254"},{"ruleId":"255","severity":1,"message":"256","line":1,"column":8,"nodeType":"257","messageId":"258","endLine":1,"endColumn":9},{"ruleId":"255","severity":1,"message":"259","line":8,"column":8,"nodeType":"257","messageId":"258","endLine":8,"endColumn":25},{"ruleId":"260","severity":1,"message":"261","line":30,"column":9,"nodeType":"262","messageId":"263","endLine":46,"endColumn":10},{"ruleId":"249","severity":1,"message":"250","line":218,"column":50,"nodeType":"251","messageId":"252","endLine":218,"endColumn":52},{"ruleId":"255","severity":1,"message":"264","line":10,"column":8,"nodeType":"257","messageId":"258","endLine":10,"endColumn":21},{"ruleId":"249","severity":1,"message":"250","line":220,"column":50,"nodeType":"251","messageId":"252","endLine":220,"endColumn":52},{"ruleId":"249","severity":1,"message":"250","line":235,"column":50,"nodeType":"251","messageId":"252","endLine":235,"endColumn":52},{"ruleId":"245","replacedBy":"265"},{"ruleId":"247","replacedBy":"266"},{"ruleId":"255","severity":1,"message":"267","line":38,"column":10,"nodeType":"257","messageId":"258","endLine":38,"endColumn":31},{"ruleId":"245","replacedBy":"268"},{"ruleId":"247","replacedBy":"269"},{"ruleId":"255","severity":1,"message":"270","line":1,"column":28,"nodeType":"257","messageId":"258","endLine":1,"endColumn":37},{"ruleId":"255","severity":1,"message":"271","line":9,"column":8,"nodeType":"257","messageId":"258","endLine":9,"endColumn":12},{"ruleId":"255","severity":1,"message":"272","line":10,"column":8,"nodeType":"257","messageId":"258","endLine":10,"endColumn":12},{"ruleId":"245","replacedBy":"273"},{"ruleId":"247","replacedBy":"274"},{"ruleId":"245","replacedBy":"275"},{"ruleId":"247","replacedBy":"276"},{"ruleId":"249","severity":1,"message":"250","line":38,"column":34,"nodeType":"251","messageId":"252","endLine":38,"endColumn":36},{"ruleId":"255","severity":1,"message":"277","line":4,"column":10,"nodeType":"257","messageId":"258","endLine":4,"endColumn":19},{"ruleId":"245","replacedBy":"278"},{"ruleId":"247","replacedBy":"279"},{"ruleId":"280","severity":1,"message":"281","line":247,"column":106,"nodeType":"282","endLine":247,"endColumn":118},{"ruleId":"245","replacedBy":"283"},{"ruleId":"247","replacedBy":"284"},{"ruleId":"255","severity":1,"message":"270","line":1,"column":28,"nodeType":"257","messageId":"258","endLine":1,"endColumn":37},{"ruleId":"255","severity":1,"message":"285","line":2,"column":8,"nodeType":"257","messageId":"258","endLine":2,"endColumn":14},{"ruleId":"255","severity":1,"message":"286","line":6,"column":28,"nodeType":"257","messageId":"258","endLine":6,"endColumn":45},{"ruleId":"255","severity":1,"message":"287","line":4,"column":8,"nodeType":"257","messageId":"258","endLine":4,"endColumn":16},{"ruleId":"288","severity":1,"message":"289","line":22,"column":11,"nodeType":"290","endLine":33,"endColumn":6},{"ruleId":"255","severity":1,"message":"291","line":58,"column":11,"nodeType":"257","messageId":"258","endLine":58,"endColumn":14},{"ruleId":"255","severity":1,"message":"292","line":64,"column":22,"nodeType":"257","messageId":"258","endLine":64,"endColumn":33},{"ruleId":"249","severity":1,"message":"250","line":130,"column":50,"nodeType":"251","messageId":"252","endLine":130,"endColumn":52},{"ruleId":"293","severity":1,"message":"294","line":116,"column":9,"nodeType":"295","messageId":"296","endLine":116,"endColumn":24},{"ruleId":"255","severity":1,"message":"287","line":4,"column":8,"nodeType":"257","messageId":"258","endLine":4,"endColumn":16},{"ruleId":"255","severity":1,"message":"285","line":2,"column":8,"nodeType":"257","messageId":"258","endLine":2,"endColumn":14},{"ruleId":"255","severity":1,"message":"297","line":8,"column":8,"nodeType":"257","messageId":"258","endLine":8,"endColumn":20},{"ruleId":"255","severity":1,"message":"298","line":7,"column":8,"nodeType":"257","messageId":"258","endLine":7,"endColumn":23},{"ruleId":"280","severity":1,"message":"299","line":102,"column":88,"nodeType":"282","endLine":102,"endColumn":128},{"ruleId":"255","severity":1,"message":"300","line":7,"column":8,"nodeType":"257","messageId":"258","endLine":7,"endColumn":15},{"ruleId":"280","severity":1,"message":"299","line":52,"column":80,"nodeType":"282","endLine":52,"endColumn":120},"no-native-reassign",["301"],"no-negated-in-lhs",["302"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside",["301"],["302"],"no-unused-vars","'e' is defined but never used.","Identifier","unusedVar","'placeholderAvatar' is defined but never used.","default-case","Expected a default case.","SwitchStatement","missingDefaultCase","'dropdownArrow' is defined but never used.",["301"],["302"],"'verifyUserFetchSucces' is defined but never used.",["301"],["302"],"'useEffect' is defined but never used.","'star' is defined but never used.","'bell' is defined but never used.",["301"],["302"],["301"],["302"],"'addResume' is defined but never used.",["301"],["302"],"jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","JSXOpeningElement",["301"],["302"],"'Loader' is defined but never used.","'createNewEmployer' is defined but never used.","'firebase' is defined but never used.","react-hooks/exhaustive-deps","The 'onMove' function makes the dependencies of useEffect Hook (at line 43) change on every render. Move it inside the useEffect callback. Alternatively, wrap the definition of 'onMove' in its own useCallback() Hook.","VariableDeclarator","'pos' is assigned a value but never used.","'setPosition' is assigned a value but never used.","no-dupe-keys","Duplicate key 'onAddressChange'.","ObjectExpression","unexpected","'fileUploader' is defined but never used.","'photoRedactIcon' is defined but never used.","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/evcohen/eslint-plugin-jsx-a11y/blob/master/docs/rules/anchor-is-valid.md","'Cropper' is defined but never used.","no-global-assign","no-unsafe-negation"]